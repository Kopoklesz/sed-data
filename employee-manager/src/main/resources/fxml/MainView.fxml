<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.input.KeyCodeCombination?>

<?import com.employeemanager.component.StatusBar?>
<VBox spacing="0" xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.employeemanager.controller.MainViewController"
      styleClass="main-container">

    <!-- ToggleGroup definÃ­ciÃ³ az elejÃ©n -->
    <fx:define>
        <ToggleGroup fx:id="filterGroup"/>
    </fx:define>

    <MenuBar styleClass="main-menubar">
        <!-- FÃ¡jl menÃ¼ -->
        <Menu text="FÃ¡jl">
            <MenuItem text="Ãšj alkalmazott" onAction="#showAddEmployeeDialog">
                <accelerator>
                    <KeyCodeCombination alt="UP" code="N" control="DOWN" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>
            <MenuItem text="Ãšj munkanaplÃ³" onAction="#showAddWorkRecordDialog">
                <accelerator>
                    <KeyCodeCombination alt="UP" code="M" control="DOWN" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>
        </Menu>

        <!-- SzerkesztÃ©s menÃ¼ -->
        <Menu text="SzerkesztÃ©s">
            <MenuItem text="Alkalmazott szerkesztÃ©se" onAction="#editSelectedEmployee">
                <accelerator>
                    <KeyCodeCombination alt="UP" code="T" control="DOWN" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>
            <MenuItem text="MunkanaplÃ³ szerkesztÃ©se" onAction="#editSelectedWorkRecord">
                <accelerator>
                    <KeyCodeCombination alt="UP" code="R" control="DOWN" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>
        </Menu>

        <!-- NÃ©zet menÃ¼ -->
        <Menu text="NÃ©zet">
            <MenuItem text="Alkalmazottak" onAction="#showEmployeeTab"/>
            <MenuItem text="MunkanaplÃ³k" onAction="#showWorkRecordTab"/>
            <MenuItem text="Riportok" onAction="#showReportsTab"/>
        </Menu>

        <!-- EszkÃ¶zÃ¶k menÃ¼ -->
        <Menu text="EszkÃ¶zÃ¶k">
            <MenuItem text="AdatbÃ¡zis kapcsolat beÃ¡llÃ­tÃ³" onAction="#showDatabaseSettings"/>
            <SeparatorMenuItem/>
            <MenuItem text="HasznÃ¡lati ÃºtmutatÃ³" onAction="#showUserGuide">
                <accelerator>
                    <KeyCodeCombination alt="UP" code="F1" control="UP" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>
            <MenuItem text="NÃ©vjegy" onAction="#showAboutDialog"/>
        </Menu>

        <!-- In the "FÃ¡jl" menu, after the existing items: -->
        <SeparatorMenuItem/>
        <MenuItem text="ðŸ”„ Adatok frissÃ­tÃ©se" onAction="#forceRefreshData">
            <accelerator>
                <KeyCodeCombination alt="UP" code="F5" control="UP" meta="UP" shift="UP" shortcut="UP"/>
            </accelerator>
        </MenuItem>

        <!-- In the "EszkÃ¶zÃ¶k" menu, after "AdatbÃ¡zis kapcsolat beÃ¡llÃ­tÃ³": -->
        <MenuItem text="ðŸ“Š AdatbÃ¡zis Ã¡llapot" onAction="#showDatabaseStatus"/>

        <!-- New complete EszkÃ¶zÃ¶k menu section with all items: -->
        <Menu text="EszkÃ¶zÃ¶k">
            <MenuItem text="AdatbÃ¡zis kapcsolat kezelÅ‘" onAction="#showDatabaseSettings">
                <graphic>
                    <Label text="ðŸ—„ï¸"/>
                </graphic>
            </MenuItem>
            <MenuItem text="AdatbÃ¡zis Ã¡llapot" onAction="#showDatabaseStatus">
                <graphic>
                    <Label text="ðŸ“Š"/>
                </graphic>
            </MenuItem>
            <SeparatorMenuItem/>
            <MenuItem text="HasznÃ¡lati ÃºtmutatÃ³" onAction="#showUserGuide">
                <accelerator>
                    <KeyCodeCombination alt="UP" code="F1" control="UP" meta="UP" shift="UP" shortcut="UP"/>
                </accelerator>
            </MenuItem>
            <MenuItem text="NÃ©vjegy" onAction="#showAboutDialog"/>
        </Menu>
    </MenuBar>

    <TabPane VBox.vgrow="ALWAYS" styleClass="main-tabpane" fx:id="mainTabPane">
        <!-- Alkalmazottak kezelÃ©se tab -->
        <Tab text="Alkalmazottak" closable="false" styleClass="main-tab">
            <VBox spacing="15" styleClass="tab-content">
                <padding>
                    <Insets top="20" right="20" bottom="20" left="20"/>
                </padding>

                <HBox spacing="15" alignment="CENTER_LEFT" styleClass="search-toolbar">
                    <TextField fx:id="employeeSearchField" promptText="KeresÃ©s nÃ©v szerint..."
                               HBox.hgrow="ALWAYS" styleClass="search-field"/>
                    <Button text="KeresÃ©s" onAction="#searchEmployees" styleClass="primary-button"/>
                    <Button text="Ãšj alkalmazott" onAction="#showAddEmployeeDialog" styleClass="accent-button"/>
                </HBox>

                <TableView fx:id="employeeTable" VBox.vgrow="ALWAYS" styleClass="main-table">
                    <columns>
                        <TableColumn fx:id="idColumn" text="ID" styleClass="table-column-id"
                                     prefWidth="80" minWidth="80" maxWidth="80"/>
                        <TableColumn fx:id="nameColumn" text="NÃ©v" styleClass="table-column-name"
                                     prefWidth="150" minWidth="120"/>
                        <TableColumn fx:id="birthPlaceColumn" text="SzÃ¼letÃ©si hely" styleClass="table-column-text"
                                     prefWidth="120" minWidth="100"/>
                        <TableColumn fx:id="birthDateColumn" text="SzÃ¼letÃ©si idÅ‘" styleClass="table-column-date"
                                     prefWidth="110" minWidth="100"/>
                        <TableColumn fx:id="motherNameColumn" text="Anyja neve" styleClass="table-column-text"
                                     prefWidth="150" minWidth="120"/>
                        <TableColumn fx:id="taxNumberColumn" text="AdÃ³szÃ¡m" styleClass="table-column-number"
                                     prefWidth="110" minWidth="100"/>
                        <TableColumn fx:id="socialSecurityColumn" text="TAJ szÃ¡m" styleClass="table-column-number"
                                     prefWidth="100" minWidth="90"/>
                        <TableColumn fx:id="addressColumn" text="LakcÃ­m" styleClass="table-column-text"
                                     prefWidth="200" minWidth="150"/>
                    </columns>
                    <contextMenu>
                        <ContextMenu styleClass="context-menu">
                            <items>
                                <MenuItem text="SzerkesztÃ©s" onAction="#showEditEmployeeDialog"/>
                                <MenuItem text="TÃ¶rlÃ©s" onAction="#deleteEmployee"/>
                                <MenuItem text="MunkanaplÃ³ megtekintÃ©se" onAction="#showEmployeeWorkRecords"/>
                            </items>
                        </ContextMenu>
                    </contextMenu>
                </TableView>
            </VBox>
        </Tab>

        <!-- Havi nyilvÃ¡ntartÃ¡s tab -->
        <Tab text="MunkanaplÃ³k" closable="false" styleClass="main-tab">
            <VBox spacing="15" styleClass="tab-content">
                <padding>
                    <Insets top="20" right="20" bottom="20" left="20"/>
                </padding>

                <VBox spacing="10">
                    <!-- SzÅ±rÃ©si opciÃ³k -->
                    <HBox spacing="15" alignment="CENTER_LEFT" styleClass="filter-toolbar">
                        <Label text="SzÅ±rÃ©s:" styleClass="toolbar-label"/>
                        <RadioButton fx:id="filterByNotificationDate" text="BejelentÃ©s dÃ¡tuma" toggleGroup="$filterGroup" selected="true"/>
                        <RadioButton fx:id="filterByWorkDate" text="Munkanap" toggleGroup="$filterGroup"/>
                        <RadioButton fx:id="filterByBoth" text="MindkettÅ‘" toggleGroup="$filterGroup"/>
                    </HBox>

                    <!-- DÃ¡tum szÅ±rÅ‘k Ã©s gombok -->
                    <HBox spacing="15" alignment="CENTER_LEFT" styleClass="filter-toolbar">
                        <Label text="IdÅ‘szak:" styleClass="toolbar-label"/>
                        <DatePicker fx:id="startDatePicker" styleClass="date-picker"/>
                        <Label text="-" styleClass="toolbar-separator"/>
                        <DatePicker fx:id="endDatePicker" styleClass="date-picker"/>
                        <Button text="SzÅ±rÃ©s" onAction="#filterWorkRecords" styleClass="primary-button"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="Ãšj munkanaplÃ³" onAction="#showAddWorkRecordDialog" styleClass="accent-button"/>
                        <Button text="ExportÃ¡lÃ¡s" onAction="#exportToExcel" styleClass="secondary-button"/>
                    </HBox>
                </VBox>

                <TableView fx:id="workRecordTable" VBox.vgrow="ALWAYS" styleClass="main-table">
                    <columns>
                        <TableColumn fx:id="workIdColumn" text="ID" styleClass="table-column-id"
                                     prefWidth="80" minWidth="80" maxWidth="80"/>
                        <TableColumn fx:id="employeeNameColumn" text="Alkalmazott" styleClass="table-column-name"
                                     prefWidth="150" minWidth="120"/>
                        <TableColumn fx:id="notificationDateColumn" text="BejelentÃ©s dÃ¡tuma" styleClass="table-column-date"
                                     prefWidth="130" minWidth="110"/>
                        <TableColumn fx:id="notificationTimeColumn" text="BejelentÃ©s ideje" styleClass="table-column-date"
                                     prefWidth="110" minWidth="100"/>
                        <TableColumn fx:id="ebevSerialColumn" text="EBEV azonosÃ­tÃ³" styleClass="table-column-number"
                                     prefWidth="120" minWidth="100"/>
                        <TableColumn fx:id="workDateColumn" text="Munkanap" styleClass="table-column-date"
                                     prefWidth="110" minWidth="100"/>
                        <TableColumn fx:id="paymentColumn" text="BÃ©rezÃ©s" styleClass="table-column-currency"
                                     prefWidth="100" minWidth="80"/>
                        <TableColumn fx:id="hoursWorkedColumn" text="MunkaÃ³rÃ¡k" styleClass="table-column-number"
                                     prefWidth="90" minWidth="70"/>
                    </columns>
                    <contextMenu>
                        <ContextMenu styleClass="context-menu">
                            <items>
                                <MenuItem text="SzerkesztÃ©s" onAction="#showEditWorkRecordDialog"/>
                                <MenuItem text="TÃ¶rlÃ©s" onAction="#deleteWorkRecord"/>
                            </items>
                        </ContextMenu>
                    </contextMenu>
                </TableView>

                <HBox spacing="15" alignment="CENTER_RIGHT" styleClass="summary-toolbar">
                    <Label text="Ã–sszesÃ­tÃ©s:" styleClass="summary-label"/>
                    <Label text="Ã–sszes munkaÃ³ra:" styleClass="summary-text"/>
                    <Label fx:id="totalHoursLabel" styleClass="summary-value"/>
                    <Label text="Ã–sszes kifizetÃ©s:" styleClass="summary-text"/>
                    <Label fx:id="totalPaymentLabel" styleClass="summary-value"/>
                </HBox>
            </VBox>
        </Tab>

        <!-- Riportok tab -->
        <Tab text="Riportok" closable="false" styleClass="main-tab">
            <VBox spacing="15" styleClass="tab-content">
                <padding>
                    <Insets top="20" right="20" bottom="20" left="20"/>
                </padding>

                <TitledPane text="Riport beÃ¡llÃ­tÃ¡sok" expanded="true" styleClass="settings-pane">
                    <VBox spacing="12">
                        <padding>
                            <Insets top="15" right="15" bottom="15" left="15"/>
                        </padding>

                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Label text="IdÅ‘szak:" styleClass="settings-label"/>
                            <DatePicker fx:id="reportStartDate" styleClass="date-picker"/>
                            <Label text="-" styleClass="toolbar-separator"/>
                            <DatePicker fx:id="reportEndDate" styleClass="date-picker"/>
                        </HBox>

                        <HBox spacing="20" alignment="CENTER_LEFT">
                            <CheckBox fx:id="includeEmployeeDetails" text="Alkalmazotti adatok" styleClass="settings-checkbox"/>
                            <CheckBox fx:id="includeWorkRecords" text="MunkanaplÃ³k" styleClass="settings-checkbox"/>
                            <CheckBox fx:id="includeSummary" text="Ã–sszesÃ­tÃ©s" styleClass="settings-checkbox"/>
                        </HBox>

                        <HBox alignment="CENTER_LEFT">
                            <Button text="Riport generÃ¡lÃ¡sa" onAction="#generateReport" styleClass="accent-button"/>
                        </HBox>
                    </VBox>
                </TitledPane>

                <ListView fx:id="reportList" VBox.vgrow="ALWAYS" styleClass="report-list"/>

                <HBox spacing="15" alignment="CENTER_RIGHT" styleClass="action-toolbar">
                    <Button text="MegnyitÃ¡s" onAction="#openReport" styleClass="primary-button"/>
                    <Button text="ExportÃ¡lÃ¡s" onAction="#exportReport" styleClass="secondary-button"/>
                    <Button text="TÃ¶rlÃ©s" onAction="#deleteReport" styleClass="danger-button"/>
                </HBox>
            </VBox>
        </Tab>
    </TabPane>

    <StatusBar fx:id="statusBar" styleClass="status-bar"/>
</VBox>